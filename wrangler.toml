# Top-level configuration
compatibility_date = "2024-01-01"

# [[workers]] specifies a list of workers.

# Scanner Worker Configuration
[[workers]]
name = "plan-trading-scanner"
main = "dist/scanner.js" # Entry point for the scanner worker

# Cron Trigger for the scanner
[workers.triggers]
crons = ["*/5 * * * *"]

# Environment variables for the scanner
[workers.vars]
# These are copied from config.ts for wrangler to use.
# In a real-world scenario, you might have a build step to sync them.
QUOTE_CURRENCY = "USDC"
MIN_VOLUME_24H = 10000000
TOP_N_MARKETS = 20
CANDLE_TIMEFRAME = "5m"
CANDLE_HISTORY_COUNT = 10
VOLUME_SPIKE_FACTOR = 2.0
PRICE_SPIKE_FACTOR = 1.01
ORDER_AMOUNT_USDC = 50
TAKE_PROFIT_FACTOR = 1.025
STOP_LOSS_FACTOR = 0.9875

# Executor Worker Configuration
[[workers]]
name = "plan-trading-executor"
main = "dist/executor.js" # Entry point for the executor worker

# The executor is a standard HTTP worker, so it doesn't need a [triggers] section.
# It will be available at its default Cloudflare URL.

# Environment variables for the executor
[workers.vars]
ORDER_AMOUNT_USDC = 50
TAKE_PROFIT_FACTOR = 1.025
STOP_LOSS_FACTOR = 0.9875

# Secrets will be shared across both workers unless specified otherwise.
# They should be set using `wrangler secret put`.
